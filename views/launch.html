<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<body>

	<!-- Libraries -->
	<script type="text/javascript" src="libs/jq.js"></script>
	<script type="text/javascript" src="libs/underscore.js"></script>


	<!-- MVC -->
	<script type="text/javascript" src="libs/backbone.js"></script>
	<script type="text/javascript" src="libs/xo.js"></script>

	<!-- Style -->
	<link rel="Stylesheet" type="text/css" href="style/reset.css" />
	<link rel="Stylesheet" type="text/css" href="style/presto.css" />
	<link rel="Stylesheet" type="text/css" href="style/launch.css" />


	<link href='libs/lato/lato.css' rel='stylesheet' type='text/css'>
	<link href='libs/font-awesome/css/font-awesome.css' rel='stylesheet' type='text/css'>



	<div class='container'>

		<div class='logo'>
			<img src="assets/rabbit hat.png"> <br>
			Presto
		</div>

		<div class='tagline'>
			A Real-Time, Decision-Making Toolkit.
		</div>

		<div class='description'>
			Presto takes the guesswork out of financial planning by providing on-the-spot answers to complex questions from your clients.
		</div>

		<div class='signup'>

			<p>Enter your email to be part of the rapidly-unfolding development process and to try out <b>two free calculators</b> right now.</p>

			<input id='email' type='text' placeholder='mr.moneymustache@smartinvesting.com'></input>
			<div class='button green'>Try it!</div>
			<div class='error'>
				<span class='errorMessage'>That's not a valid email, sorry</span>
			</div>

		</div>

		<div class='promos'>
			<h3>Thanks!</h3>

			<p>Here are those calculators - stay tuned for updates including the upcoming official launch date.</p>

			<div>
				<a href='/promo1' target='_blank'>
					<div class='promoCalc'>
						<div class='tile steel'><i class='icon-sun'></i></div>
						Solar PV Analyzer
					</div>
				</a>
				<a href='/promo2' target='_blank'>
					<div class='promoCalc'>
						<div class='tile red'><i class='icon-fire-extinguisher'></i></div>
						Debt Repayment
					</div>
				</a>
			</div>

		</div>

	</div>

	<script>
		$(document).ready(function(){

			$('#email').keyup(function (e) {
				if (e.keyCode == 13) {
					sendEmail();
				}
			});

			$('.button').click(function(){
				sendEmail();
			});
		})

		var sendEmail = function(){
			var email = $('#email').val();


			$('.error').fadeOut();

			$.ajax({
				type : 'POST',
				url : '/signup',
				data : {email : email},
				success : function(){
					$('.error').fadeOut(function(){
						$('.promos').fadeIn();
					});
				},
				error  : function(err, t){
					console.log(err);
					if(err.responseText === 'invalid'){
						$('.errorMessage').text("That's not a valid email, sorry");
					}else {
						$('.errorMessage').text("Something went wrong. Try agian.");
					}
					$('.error').stop().fadeIn();
				},
				complete : function(){
					//$('.button').html("Go");
				},
			});
		}



	</script>


</body>
</html>