(function(){(function(e){var t,n;n={series:{stack:null}};t=function(e){var t,n,r,i,s,o;n=null;t=null;i=0;s=0;r=function(e){n={};t=[];e.forEach(function(e){if(e.stack!=null&&e.stack){return e.data.forEach(function(e){var r;r=e[0];if(i>0){r=Math.round((r-s)/i)*i+s}if(n[r]){return n[r].cnt++}else{n[r]={cnt:1,pos:0,neg:0};return t.push(r)}})}});t=t.sort(function(e,t){return e-t})};o=function(e,o,u){var a,f,l,c,h,p,d,v;if(o.group!=null&&o.group){i=o.groupInterval||0;l=o.xaxis.options;if(l.mode==="time"&&l.timezone==="browser"){s=(new Date).getTimezoneOffset()*6e4}}if(!n){r(e.getData())}if(o.stack==null||o.stack===false){return}c=u.points;h={};p=u.pointsize;f=0;while(f<c.length){d=c[f];v=c[f+1];if(v>=0){h[d]=[d,v+n[d].pos,n[d].pos];n[d].pos+=v}else{h[d]=[d,v+n[d].neg,n[d].neg];n[d].neg+=v}f+=p}for(d in n){a=n[d];if(h[d]==null){h[d]=[parseFloat(d),a.pos,a.pos]}}p=3;c=[];f=0;while(f<t.length){if(h[t[f]]!=null){c=c.concat(h[t[f]])}f++}u.points=c;u.pointsize=p};e.hooks.processDatapoints.push(o)};e.plot.plugins.push({init:t,options:n,name:"stacksplit",version:"0.1"})})(jQuery)}).call(this)